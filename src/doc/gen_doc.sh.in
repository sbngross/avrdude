#!/bin/sh -e

if [ -n "@SCRIPT_DEBUG@" ]
then
	set -x
	LOG_FILE=@CMAKE_BINARY_DIR@@CMAKE_FILES_DIRECTORY@/CMakeOutput.log
else
	LOG_FILE=/dev/null
fi

MAIN_TEXI=@MAIN_TEXI@
STYLE_SHEET=@STYLE_SHEET@
MAKEINFO_BIN=@MAKEINFO_BIN@


TYPE=${1}
OUT_FILE=${2}

FMT_ARGS=

case ${TYPE} in
pdf|ps|dvi)
	FMT_ARGS=" \
		"
	;;
html)
	FMT_ARGS=" \
		--css-include=${STYLE_SHEET} \
		"
	;;
*)
	exit 22
	;;
esac

${MAKEINFO_BIN} \
	--output ${OUT_FILE} \
	--${TYPE} \
	${FMT_ARGS} \
	${MAIN_TEXI} \
	>> ${LOG_FILE} 2>&1 \
	;
